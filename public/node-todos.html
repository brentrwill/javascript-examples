<!doctype html>
<html><head><meta charset="utf-8"/><title>Node Todos</title></head>
<body style="font-family:system-ui;padding:16px;">
<h2>Node) Todos: GET/POST /api/todos</h2>
<p><strong>What’s happening:</strong></p>
<ol>
  <li>Page loads → calls GET <code>/api/todos</code> to render list.</li>
  <li>Form submit → POST <code>/api/todos</code> with JSON.</li>
  <li>After POST → reload list from GET.</li>
</ol>

<form id="f" style="display:flex; gap:8px; flex-wrap:wrap;">
  <input id="text" placeholder="New todo" />
  <button>Add</button>
</form>
<ul id="list"></ul>

<script>
async function load() {
  const todos = await (await fetch("/api/todos")).json();
  const list = document.getElementById("list");
  list.innerHTML = "";
  for (const t of todos) {
    const li = document.createElement("li");
    li.textContent = t.text;
    list.appendChild(li);
  }
}

document.getElementById("f").addEventListener("submit", async (e) => {
  e.preventDefault();
  const text = document.getElementById("text").value;

  await fetch("/api/todos", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text })
  });

  document.getElementById("text").value = "";
  load();
});

load();
</script>
<p><a href="/">Back</a></p>
</body></html>
